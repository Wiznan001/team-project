# 生日信息查询系统

## 概述
生日信息查询系统是一个基于HTML、CSS和JavaScript的单页应用，允许用户输入出生日期并查询相关信息，包括生日倒计时、星座信息、今日运势和年龄计算。系统支持结果导出功能，界面采用响应式设计，适配各种设备屏幕。

## 功能模块

### 1. 日期输入模块
- **功能**：提供年份、月份、日期的下拉选择框，支持完整出生日期的输入
- **核心函数**：
  - `updateDayOptions()`：根据选中的年份和月份动态生成对应月份的天数选项
  - 年份范围：1900年至当前年份
  - 月份范围：1-12月
  - 日期范围：根据所选月份动态生成（自动处理2月闰年情况）

### 2. 功能选择模块
提供四种查询功能的可视化选择界面：
- 生日信息：计算距离下一个生日的天数和已出生天数
- 星座查询：根据生日判断星座并显示星座描述
- 今日运势：随机生成当日运势、幸运数字和幸运颜色
- 年龄计算：计算并显示周岁和虚岁

### 3. 结果展示模块
- 显示查询结果的详细信息
- 支持结果导出为TXT文件
- 提供返回主菜单功能

### 4. 导出功能模块
- **核心函数**：`exportResult()`
- 导出内容包含：生成时间、用户生日、查询项目、查询结果
- 文件名格式：`生日查询结果_时间戳.txt`

## 核心函数说明

| 函数名 | 功能描述 | 参数 | 返回值 |
|--------|----------|------|--------|
| `updateDayOptions` | 根据选中的年月动态生成日期选项 | 无 | 无 |
| `showBirthdayInfo` | 计算并显示生日相关信息 | 无 | 无 |
| `showZodiacInfo` | 判断星座并显示星座描述 | 无 | 无 |
| `getZodiacDescription` | 获取指定星座的描述文本 | `zodiac` (string) - 星座名称 | 星座描述文本 (string) |
| `showFortuneInfo` | 生成并显示今日运势 | 无 | 无 |
| `showAgeInfo` | 计算并显示周岁和虚岁 | 无 | 无 |
| `showResult` | 切换到结果显示界面 | 无 | 无 |
| `exportResult` | 将查询结果导出为TXT文件 | 无 | 无 |

## 界面交互流程
1. 用户输入出生日期（年/月/日）并点击确认
2. 系统显示功能选择界面
3. 用户选择需要查询的功能
4. 系统显示查询结果
5. 用户可选择导出结果或返回重新选择功能

## 响应式设计说明
- 在屏幕宽度≤768px时：
  - 功能选择网格从2列变为1列
  - 日期选择框变为垂直排列
  - 表单元素宽度自适应

## 依赖资源
- Font Awesome图标库（v6.4.0）：用于显示功能图标
## 代码注释
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生日信息查询系统</title>
    <!-- 引入Font Awesome Awesome图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 全局样式重置与基础设置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* 页面背景样式 */
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        /* 主容器样式 */
        .container {
            width: 100%;
            max-width: 1000px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            padding: 30px;
            position: relative;
        }
        
        /* 标题样式 */
        h1 {
            text-align: center;
            color: #2575fc;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }
        
        h2 {
            color: #6a11cb;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        /* 步骤区域样式 */
        .step {
            display: none; /* 默认隐藏所有步骤 */
            animation: fadeIn 0.5s ease; /* 淡入动画 */
        }
        
        .active {
            display: block; /* 显示当前激活的步骤 */
        }
        
        /* 日期输入区域样式 */
        .date-input {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap; /* 响应式换行 */
        }
        
        /* 表单元素样式 */
        select, input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s; /* 过渡动画 */
        }
        
        select:focus, input:focus {
            border-color: #2575fc;
            box-shadow: 0 0 10px rgba(37, 117, 252, 0.3); /* 聚焦效果 */
        }
        
        /* 按钮基础样式 */
        .btn {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: block;
            margin: 20px auto;
            min-width: 150px;
        }
        
        .btn:hover {
            transform: translateY(-3px); /* 悬停上移效果 */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(-1px); /* 点击效果 */
        }
        
        /* 功能选择网格布局 */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 两列布局 */
            gap: 25px;
            margin-top: 30px;
        }
        
        .grid-item {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .grid-item:hover {
            transform: translateY(-5px); /* 悬停上浮效果 */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        /* 图标样式 */
        .icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #2575fc;
        }
        
        /* 结果显示区域样式 */
        .result {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            display: none; /* 默认隐藏 */
        }
        
        .result.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        /* 特殊按钮样式 */
        .export-btn {
            background: linear-gradient(to right, #0f9b0f, #1ed760); /* 导出按钮绿色渐变 */
            margin-top: 15px;
        }
        
        .back-btn {
            background: linear-gradient(to right, #f7b733, #fc4a1a); /* 返回按钮橙色渐变 */
            margin-top: 20px;
        }
        
        /* 信息文本样式 */
        .info-text {
            text-align: center;
            margin: 15px 0;
            color: #666;
            font-size: 1.1rem;
        }
        
        .user-info {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: #6a11cb;
            font-weight: 500;
        }
        
        /* 淡入动画定义 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* 响应式布局适配 */
        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: 1fr; /* 移动端单列布局 */
            }
            
            .date-input {
                flex-direction: column;
                align-items: center;
            }
            
            select, input {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>生日信息查询系统</h1>
        
        <!-- 第一步：输入生日 -->
        <div class="step active" id="step1">
            <h2>请输入您的出生日期</h2>
            <div class="date-input">
                <select id="year">
                    <option value="">-- 年份 --</option>
                    <!-- 年份选项由JavaScript生成 -->
                </select>
                <select id="month">
                    <option value="">-- 月份 --</option>
                    <!-- 月份选项由JavaScript生成 -->
                </select>
                <select id="day">
                    <option value="">-- 日期 --</option>
                    <!-- 日期选项由JavaScript生成 -->
                </select>
            </div>
            <button class="btn" id="confirm-btn">确认</button>
        </div>
        
        <!-- 第二步：功能选择 -->
        <div class="step" id="step2">
            <div class="user-info" id="user-birthday"></div>
            <h2>请选择您要查询的功能</h2>
            
            <div class="grid-container">
                <div class="grid-item" id="birthday-info">
                    <i class="fas fa-birthday-cake icon"></i>
                    <h3>生日信息</h3>
                    <p>查询距离下一个生日还有多少天</p>
                </div>
                
                <div class="grid-item" id="zodiac-info">
                    <i class="fas fa-star icon"></i>
                    <h3>星座查询</h3>
                    <p>查询您的星座信息</p>
                </div>
                
                <div class="grid-item" id="fortune-info">
                    <i class="fas fa-crystal-ball icon"></i>
                    <h3>今日运势</h3>
                    <p>查询您当日的运势</p>
                </div>
                
                <div class="grid-item" id="age-info">
                    <i class="fas fa-user icon"></i>
                    <h3>年龄计算</h3>
                    <p>查询您的周岁和虚岁</p>
                </div>
            </div>
            
            <button class="btn back-btn" id="back-to-date">返回修改日期</button>
        </div>
        
        <!-- 结果显示区域 -->
        <div class="result" id="result">
            <h2 id="result-title">查询结果</h2>
            <div class="info-text" id="result-content"></div>
            <button class="btn export-btn" id="export-btn">导出结果</button>
            <button class="btn back-btn" id="back-to-menu">返回主菜单</button>
        </div>
    </div>

    <script>
        // 全局变量 - 存储用户生日日期对象
        let userBirthday = null;
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 生成年份选项（从今年到1900年）
            const yearSelect = document.getElementById('year');
            const currentYear = new Date().getFullYear();
            for (let year = currentYear; year >= 1900; year--) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            }
            
            // 生成月份选项（1-12月）
            const monthSelect = document.getElementById('month');
            for (let month = 1; month <= 12; month++) {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = month + '月';
                monthSelect.appendChild(option);
            }
            
            // 当月变化时更新日期选项（根据月份动态生成天数）
            monthSelect.addEventListener('change', updateDayOptions);
            
            // 确认按钮点击事件 - 验证输入并进入功能选择界面
            document.getElementById('confirm-btn').addEventListener('click', function() {
                const year = document.getElementById('year').value;
                const month = document.getElementById('month').value;
                const day = document.getElementById('day').value;
                
                // 验证输入完整性
                if (!year || !month || !day) {
                    alert('请选择完整的出生日期！');
                    return;
                }
                
                // 存储用户生日
                userBirthday = new Date(year, month - 1, day);
                document.getElementById('user-birthday').textContent = `您的生日: ${year}年${month}月${day}日`;
                
                // 切换到功能选择界面
                document.getElementById('step1').classList.remove('active');
                document.getElementById('step2').classList.add('active');
            });
            
            // 返回修改日期按钮事件
            document.getElementById('back-to-date').addEventListener('click', function() {
                document.getElementById('step2').classList.remove('active');
                document.getElementById('step1').classList.add('active');
            });
            
            // 返回主菜单按钮事件
            document.getElementById('back-to-menu').addEventListener('click', function() {
                document.getElementById('result').classList.remove('active');
                document.getElementById('step2').classList.add('active');
            });
            
            // 导出结果按钮事件
            document.getElementById('export-btn').addEventListener('click', exportResult);
            
            // 功能按钮点击事件绑定
            document.getElementById('birthday-info').addEventListener('click', showBirthdayInfo);
            document.getElementById('zodiac-info').addEventListener('click', showZodiacInfo);
            document.getElementById('fortune-info').addEventListener('click', showFortuneInfo);
            document.getElementById('age-info').addEventListener('click', showAgeInfo);
        });
        
        /**
         * 更新日期选项
         * 根据选中的年份和月份动态生成对应月份的天数选项
         */
        function updateDayOptions() {
            const year = document.getElementById('year').value;
            const month = document.getElementById('month').value;
            const daySelect = document.getElementById('day');
            
            // 清空现有选项（保留第一个占位选项）
            while (daySelect.options.length > 1) {
                daySelect.remove(1);
            }
            
            // 若年份或月份未选择则不生成日期
            if (!year || !month) return;
            
            // 计算所选月份的天数（通过设置为下个月第0天获取当月最后一天）
            const daysInMonth = new Date(year, month, 0).getDate();
            
            // 添加日期选项
            for (let day = 1; day <= daysInMonth; day++) {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = day + '日';
                daySelect.appendChild(option);
            }
        }
        
        /**
         * 显示生日信息
         * 计算距离下一个生日的天数和已出生天数
         */
        function showBirthdayInfo() {
            const today = new Date();
            // 计算今年的生日
            const nextBirthday = new Date(today.getFullYear(), userBirthday.getMonth(), userBirthday.getDate());
            
            // 若今年生日已过，则计算明年的生日
            if (today > nextBirthday) {
                nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
            }
            
            // 计算剩余天数（向上取整）
            const daysUntilBirthday = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));
            // 计算已出生天数（向下取整）
            const daysLived = Math.floor((today - userBirthday) / (1000 * 60 * 60 * 24));
            
            // 更新结果区域
            document.getElementById('result-title').textContent = '生日信息';
            document.getElementById('result-content').innerHTML = `
                <p>距离您下一个生日还有: <strong>${daysUntilBirthday}</strong> 天</p>
                <p>您已经出生了: <strong>${daysLived}</strong> 天</p>
            `;
            
            // 显示结果
            showResult();
        }
        
        /**
         * 显示星座信息
         * 根据生日计算对应的星座并显示描述
         */
        function showZodiacInfo() {
            const month = userBirthday.getMonth() + 1; // 月份从0开始，需+1
            const day = userBirthday.getDate();
            let zodiac = '';
            
            // 根据日期范围判断星座
            if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) zodiac = '水瓶座';
            else if ((month === 2 && day >= 19) || (month === 3 && day <= 20)) zodiac = '双鱼座';
            else if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) zodiac = '白羊座';
            else if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) zodiac = '金牛座';
            else if ((month === 5 && day >= 21) || (month === 6 && day <= 21)) zodiac = '双子座';
            else if ((month === 6 && day >= 22) || (month === 7 && day <= 22)) zodiac = '巨蟹座';
            else if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) zodiac = '狮子座';
            else if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) zodiac = '处女座';
            else if ((month === 9 && day >= 23) || (month === 10 && day <= 23)) zodiac = '天秤座';
            else if ((month === 10 && day >= 24) || (month === 11 && day <= 22)) zodiac = '天蝎座';
            else if ((month === 11 && day >= 23) || (month === 12 && day <= 21)) zodiac = '射手座';
            else if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) zodiac = '摩羯座';
            
            // 更新结果区域
            document.getElementById('result-title').textContent = '星座信息';
            document.getElementById('result-content').innerHTML = `
                <p>您的星座是: <strong>${zodiac}</strong></p>
                <p>${getZodiacDescription(zodiac)}</p>
            `;
            
            // 显示结果
            showResult();
        }
        
        /**
         * 获取星座描述
         * @param {string} zodiac - 星座名称
         * @returns {string} 星座的描述文本
         */
        function getZodiacDescription(zodiac) {
            const descriptions = {
                '水瓶座': '水瓶座的人富有创造力，思维独特，喜欢追求新奇事物。',
                '双鱼座': '双鱼座的人富有同情心，直觉敏锐，具有艺术天赋。',
                '白羊座': '白羊座的人充满活力，勇敢直接，喜欢接受挑战。',
                '金牛座': '金牛座的人稳重务实，有耐心，注重物质享受。',
                '双子座': '双子座的人聪明灵活，善于沟通，喜欢变化。',
                '巨蟹座': '巨蟹座的人情感丰富，家庭观念强，有保护欲。',
                '狮子座': '狮子座的人自信大方，有领导力，喜欢被关注。',
                '处女座': '处女座的人细心谨慎，追求完美，善于分析。',
                '天秤座': '天秤座的人追求和谐，善于交际，重视公平。',
                '天蝎座': '天蝎座的人意志坚定，直觉敏锐，有深度。',
                '射手座': '射手座的人乐观开朗，热爱自由，喜欢冒险。',
                '摩羯座': '摩羯座的人务实稳重，有责任感，目标明确。'
            };
            
            return descriptions[zodiac] || '这是一个神秘的星座。';
        }
        
        /**
         * 显示今日运势
         * 随机生成运势信息、幸运数字和幸运颜色
         */
        function showFortuneInfo() {
            const fortunes = [
                '今天是你幸运日！可能会有意想不到的收获。',
                '今天适合尝试新事物，也许会开启新的机会。',
                '今天要注意人际关系，多沟通能避免误会。',
                '今天财运不错，可以考虑投资或购物。',
                '今天工作运佳，适合完成重要任务。',
                '今天感情运上升，单身者可能会遇到心仪对象。',
                '今天健康运良好，适合进行体育锻炼。',
                '今天学习运不错，适合吸收新知识。'
            ];
            
            // 随机选择一条运势
            const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
            
            // 更新结果区域
            document.getElementById('result-title').textContent = '今日运势';
            document.getElementById('result-content').innerHTML = `
                <p>${randomFortune}</p>
                <p>幸运数字: <strong>${Math.floor(Math.random() * 10) + 1}</strong></p>
                <p>幸运颜色: <strong>${['红色', '蓝色', '绿色', '黄色', '紫色', '橙色'][Math.floor(Math.random() * 6)]}</strong></p>
            `;
            
            // 显示结果
            showResult();
        }
        
        /**
         * 显示年龄信息
         * 计算并显示周岁和虚岁
         */
        function showAgeInfo() {
            const today = new Date();
            const birthYear = userBirthday.getFullYear();
            const birthMonth = userBirthday.getMonth();
            const birthDate = userBirthday.getDate();
            
            const currentYear = today.getFullYear();
            const currentMonth = today.getMonth();
            const currentDate = today.getDate();
            
            // 计算周岁（若未过今年生日则减1）
            let actualAge = currentYear - birthYear;
            if (currentMonth < birthMonth || (currentMonth === birthMonth && currentDate < birthDate)) {
                actualAge--;
            }
            
            // 计算虚岁（中国传统计算方式：出生即为1岁，每过春节加1岁）
            let nominalAge = currentYear - birthYear + 1;
            
            // 更新结果区域
            document.getElementById('result-title').textContent = '年龄信息';
            document.getElementById('result-content').innerHTML = `
                <p>您的周岁是: <strong>${actualAge}</strong> 岁</p>
                <p>您的虚岁是: <strong>${nominalAge}</strong> 岁</p>
                <p>您出生于 ${birthYear} 年，今年是 ${currentYear} 年</p>
            `;
            
            // 显示结果
            showResult();
        }
        
        /**
         * 显示结果区域
         * 切换界面到结果显示状态
         */
        function showResult() {
            document.getElementById('step2').classList.remove('active');
            document.getElementById('result').classList.add('active');
        }
        
        /**
         * 导出结果
         * 将查询结果导出为文本文件下载
         */
        function exportResult() {
            const title = document.getElementById('result-title').textContent;
            const content = document.getElementById('result-content').textContent;
            const userDate = `${userBirthday.getFullYear()}年${userBirthday.getMonth() + 1}月${userBirthday.getDate()}日`;
            
            // 构建导出内容
            const exportContent = `
生日信息查询系统 - 导出结果
生成时间: ${new Date().toLocaleString()}
用户生日: ${userDate}
查询项目: ${title}
查询结果:
${content}
感谢使用生日信息查询系统！
            `;
            
            // 创建Blob对象并生成下载链接
            const blob = new Blob([exportContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `生日查询结果_${new Date().getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            
            // 清理临时元素和链接
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            alert('结果已导出下载！');
        }
    </script>
</body>
</html>
